!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).hx=t()}(this,(function(){"use strict";console.warn||(console.warn=console.log),console.error||(console.error=console.log);var e=function(e){console.warn("欢迎使用高阳-海星-sdk，请使用HX.init初始化项目"),window.ant||(console.warn('ios设置标题有问题，需在html手动引入脚本<script src="https://a.alipayobjects.com/g/component/antbridge/1.1.4/antbridge.min.js"><\/script>'),console.log("如果前端路由跳转时标题不同，请使用HX.setTitle重新设置标题")),this._engine=e,this.init=this._engine.init,this.setTitle=this._engine.setTitle,this.getParams=this._engine.getParams,this.jump=this._engine.jump,this.getConfig=this._engine.getConfig,this.getConfigById=this._engine.getConfigById,this.getUid=this._engine.getUid},t=function(){return t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},t.apply(this,arguments)};function n(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}function r(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}function o(e){if(e){document.title=e;try{var t=navigator.userAgent.toLowerCase(),n=window.ant;if(/AlipayClient/i.test(t)&&n)n.setTitle(e);else{var r=document.createElement("iframe");r.src="/favicon.ico",r.onload=function(){setTimeout((function(){r.remove()}),0)},document.body.appendChild(r)}}catch(e){console.log(e)}}}var i=function(e){void 0===e&&(e="");var t=e.split("&"),n={};return t.forEach((function(e){var t=e.indexOf("="),r=e.slice(0,t),o=e.slice(t+1);n[r]=o})),n},s=function(e){void 0===e&&(e={});var t=[];for(var n in e)t.push(n+"="+e[n]);return t.join("&")},a=function(){var e,n=window.location,r=n.search.slice(1)||"",o=n.hash||"",s="",a="";return o.indexOf("?")>-1?(s=(e=o.split("?"))[0],a=e[1]):s=o,s=s.split("#")[1],t(t(t({},i(r)),i(a)),{page:s})};function c(){return a()||{}}var u=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}},l=Object.prototype.toString;function f(e){return"[object Array]"===l.call(e)}function d(e){return void 0===e}function p(e){return null!==e&&"object"==typeof e}function h(e){if("[object Object]"!==l.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function m(e){return"[object Function]"===l.call(e)}function g(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),f(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}var v={isArray:f,isArrayBuffer:function(e){return"[object ArrayBuffer]"===l.call(e)},isBuffer:function(e){return null!==e&&!d(e)&&null!==e.constructor&&!d(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:p,isPlainObject:h,isUndefined:d,isDate:function(e){return"[object Date]"===l.call(e)},isFile:function(e){return"[object File]"===l.call(e)},isBlob:function(e){return"[object Blob]"===l.call(e)},isFunction:m,isStream:function(e){return p(e)&&m(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:g,merge:function e(){var t={};function n(n,r){h(t[r])&&h(n)?t[r]=e(t[r],n):h(n)?t[r]=e({},n):f(n)?t[r]=n.slice():t[r]=n}for(var r=0,o=arguments.length;r<o;r++)g(arguments[r],n);return t},extend:function(e,t,n){return g(t,(function(t,r){e[r]=n&&"function"==typeof t?u(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}};function y(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var w=function(e,t,n){if(!t)return e;var r;if(n)r=n(t);else if(v.isURLSearchParams(t))r=t.toString();else{var o=[];v.forEach(t,(function(e,t){null!=e&&(v.isArray(e)?t+="[]":e=[e],v.forEach(e,(function(e){v.isDate(e)?e=e.toISOString():v.isObject(e)&&(e=JSON.stringify(e)),o.push(y(t)+"="+y(e))})))})),r=o.join("&")}if(r){var i=e.indexOf("#");-1!==i&&(e=e.slice(0,i)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e};function b(){this.handlers=[]}b.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},b.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},b.prototype.forEach=function(e){v.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var j=b,x=function(e,t){v.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))},E=function(e,t,n,r,o){return e.config=t,n&&(e.code=n),e.request=r,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e},O=function(e,t,n,r,o){var i=new Error(e);return E(i,t,n,r,o)},S=v.isStandardBrowserEnv()?{write:function(e,t,n,r,o,i){var s=[];s.push(e+"="+encodeURIComponent(t)),v.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),v.isString(r)&&s.push("path="+r),v.isString(o)&&s.push("domain="+o),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},C=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],k=v.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=v.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0},P=function(e){return new Promise((function(t,n){var r=e.data,o=e.headers,i=e.responseType;v.isFormData(r)&&delete o["Content-Type"];var s=new XMLHttpRequest;if(e.auth){var a=e.auth.username||"",c=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.Authorization="Basic "+btoa(a+":"+c)}var u,l,f=(u=e.baseURL,l=e.url,u&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(l)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(u,l):l);function d(){if(s){var r,o,a,c,u,l="getAllResponseHeaders"in s?(r=s.getAllResponseHeaders(),u={},r?(v.forEach(r.split("\n"),(function(e){if(c=e.indexOf(":"),o=v.trim(e.substr(0,c)).toLowerCase(),a=v.trim(e.substr(c+1)),o){if(u[o]&&C.indexOf(o)>=0)return;u[o]="set-cookie"===o?(u[o]?u[o]:[]).concat([a]):u[o]?u[o]+", "+a:a}})),u):u):null,f={data:i&&"text"!==i&&"json"!==i?s.response:s.responseText,status:s.status,statusText:s.statusText,headers:l,config:e,request:s};!function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(O("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}(t,n,f),s=null}}if(s.open(e.method.toUpperCase(),w(f,e.params,e.paramsSerializer),!0),s.timeout=e.timeout,"onloadend"in s?s.onloadend=d:s.onreadystatechange=function(){s&&4===s.readyState&&(0!==s.status||s.responseURL&&0===s.responseURL.indexOf("file:"))&&setTimeout(d)},s.onabort=function(){s&&(n(O("Request aborted",e,"ECONNABORTED",s)),s=null)},s.onerror=function(){n(O("Network Error",e,null,s)),s=null},s.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(O(t,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",s)),s=null},v.isStandardBrowserEnv()){var p=(e.withCredentials||k(f))&&e.xsrfCookieName?S.read(e.xsrfCookieName):void 0;p&&(o[e.xsrfHeaderName]=p)}"setRequestHeader"in s&&v.forEach(o,(function(e,t){void 0===r&&"content-type"===t.toLowerCase()?delete o[t]:s.setRequestHeader(t,e)})),v.isUndefined(e.withCredentials)||(s.withCredentials=!!e.withCredentials),i&&"json"!==i&&(s.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&s.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&s.upload&&s.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){s&&(s.abort(),n(e),s=null)})),r||(r=null),s.send(r)}))},A={"Content-Type":"application/x-www-form-urlencoded"};function T(e,t){!v.isUndefined(e)&&v.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var N,_={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(N=P),N),transformRequest:[function(e,t){return x(t,"Accept"),x(t,"Content-Type"),v.isFormData(e)||v.isArrayBuffer(e)||v.isBuffer(e)||v.isStream(e)||v.isFile(e)||v.isBlob(e)?e:v.isArrayBufferView(e)?e.buffer:v.isURLSearchParams(e)?(T(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):v.isObject(e)||t&&"application/json"===t["Content-Type"]?(T(t,"application/json"),function(e,t,n){if(v.isString(e))try{return(t||JSON.parse)(e),v.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional,n=t&&t.silentJSONParsing,r=t&&t.forcedJSONParsing,o=!n&&"json"===this.responseType;if(o||r&&v.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(o){if("SyntaxError"===e.name)throw E(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};_.headers={common:{Accept:"application/json, text/plain, */*"}},v.forEach(["delete","get","head"],(function(e){_.headers[e]={}})),v.forEach(["post","put","patch"],(function(e){_.headers[e]=v.merge(A)}));var R=_,U=function(e,t,n){var r=this||R;return v.forEach(n,(function(n){e=n.call(r,e,t)})),e},B=function(e){return!(!e||!e.__CANCEL__)};function L(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var I=function(e){return L(e),e.headers=e.headers||{},e.data=U.call(e,e.data,e.headers,e.transformRequest),e.headers=v.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),v.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||R.adapter)(e).then((function(t){return L(e),t.data=U.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return B(t)||(L(e),t&&t.response&&(t.response.data=U.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},D=function(e,t){t=t||{};var n={},r=["url","method","data"],o=["headers","auth","proxy","params"],i=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function a(e,t){return v.isPlainObject(e)&&v.isPlainObject(t)?v.merge(e,t):v.isPlainObject(t)?v.merge({},t):v.isArray(t)?t.slice():t}function c(r){v.isUndefined(t[r])?v.isUndefined(e[r])||(n[r]=a(void 0,e[r])):n[r]=a(e[r],t[r])}v.forEach(r,(function(e){v.isUndefined(t[e])||(n[e]=a(void 0,t[e]))})),v.forEach(o,c),v.forEach(i,(function(r){v.isUndefined(t[r])?v.isUndefined(e[r])||(n[r]=a(void 0,e[r])):n[r]=a(void 0,t[r])})),v.forEach(s,(function(r){r in t?n[r]=a(e[r],t[r]):r in e&&(n[r]=a(void 0,e[r]))}));var u=r.concat(o).concat(i).concat(s),l=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===u.indexOf(e)}));return v.forEach(l,c),n},q={name:"axios",version:"0.21.4",description:"Promise based HTTP client for the browser and node.js",main:"index.js",scripts:{test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},repository:{type:"git",url:"https://github.com/axios/axios.git"},keywords:["xhr","http","ajax","promise","node"],author:"Matt Zabriskie",license:"MIT",bugs:{url:"https://github.com/axios/axios/issues"},homepage:"https://axios-http.com",devDependencies:{coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},browser:{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},jsdelivr:"dist/axios.min.js",unpkg:"dist/axios.min.js",typings:"./index.d.ts",dependencies:{"follow-redirects":"^1.14.0"},bundlesize:[{path:"./dist/axios.min.js",threshold:"5kB"}]},J={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){J[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var F={},H=q.version.split(".");function z(e,t){for(var n=t?t.split("."):H,r=e.split("."),o=0;o<3;o++){if(n[o]>r[o])return!0;if(n[o]<r[o])return!1}return!1}J.transitional=function(e,t,n){var r=t&&z(t);function o(e,t){return"[Axios v"+q.version+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,i,s){if(!1===e)throw new Error(o(i," has been removed in "+t));return r&&!F[i]&&(F[i]=!0,console.warn(o(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,s)}};var M={isOlderVersion:z,assertOptions:function(e,t,n){if("object"!=typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),o=r.length;o-- >0;){var i=r[o],s=t[i];if(s){var a=e[i],c=void 0===a||s(a,i,e);if(!0!==c)throw new TypeError("option "+i+" must be "+c)}else if(!0!==n)throw Error("Unknown option "+i)}},validators:J},V=M.validators;function X(e){this.defaults=e,this.interceptors={request:new j,response:new j}}X.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=D(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&M.assertOptions(t,{silentJSONParsing:V.transitional(V.boolean,"1.0.0"),forcedJSONParsing:V.transitional(V.boolean,"1.0.0"),clarifyTimeoutError:V.transitional(V.boolean,"1.0.0")},!1);var n=[],r=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(r=r&&t.synchronous,n.unshift(t.fulfilled,t.rejected))}));var o,i=[];if(this.interceptors.response.forEach((function(e){i.push(e.fulfilled,e.rejected)})),!r){var s=[I,void 0];for(Array.prototype.unshift.apply(s,n),s=s.concat(i),o=Promise.resolve(e);s.length;)o=o.then(s.shift(),s.shift());return o}for(var a=e;n.length;){var c=n.shift(),u=n.shift();try{a=c(a)}catch(e){u(e);break}}try{o=I(a)}catch(e){return Promise.reject(e)}for(;i.length;)o=o.then(i.shift(),i.shift());return o},X.prototype.getUri=function(e){return e=D(this.defaults,e),w(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},v.forEach(["delete","get","head","options"],(function(e){X.prototype[e]=function(t,n){return this.request(D(n||{},{method:e,url:t,data:(n||{}).data}))}})),v.forEach(["post","put","patch"],(function(e){X.prototype[e]=function(t,n,r){return this.request(D(r||{},{method:e,url:t,data:n}))}}));var $=X;function G(e){this.message=e}G.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},G.prototype.__CANCEL__=!0;var W=G;function K(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new W(e),t(n.reason))}))}K.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},K.source=function(){var e;return{token:new K((function(t){e=t})),cancel:e}};var Y=K;function Z(e){var t=new $(e),n=u($.prototype.request,t);return v.extend(n,$.prototype,t),v.extend(n,t),n}var Q=Z(R);Q.Axios=$,Q.create=function(e){return Z(D(Q.defaults,e))},Q.Cancel=W,Q.CancelToken=Y,Q.isCancel=B,Q.all=function(e){return Promise.all(e)},Q.spread=function(e){return function(t){return e.apply(null,t)}},Q.isAxiosError=function(e){return"object"==typeof e&&!0===e.isAxiosError};var ee=Q,te=Q;ee.default=te;var ne=ee.create({timeout:1e4});ne.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),ne.interceptors.response.use((function(e){return e.data}),(function(e){return Promise.reject(e)}));var re=function(e){return ne.get(e)};function oe(e){var t;return t="current"===e||""===e||null==e?"./config.json":"./config."+e+".json",t+="?"+Date.now(),re(t).then((function(e){return e})).catch((function(e){return console.error(e),Promise.resolve(null)}))}var ie={uid:"",config:null},se=function(e){return void 0===e&&(e=0),new Promise((function(t){setTimeout(t,e)}))},ae={dev:"https://log-d2v-web-test.19ego.cn",test:"https://log-d2v-web-test.19ego.cn",prod:"https://log-d2v-web.19ego.cn"},ce={dev:"https://spm-sit.gyjxwh.com",test:"https://spm-sit.gyjxwh.com",prod:"https://spm.iyoudui.com"},ue=function(e){return n(void 0,void 0,void 0,(function(){var t,n,o,i,s,c,u,l,f,d,p,h,m,g,v;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),t=ie.config,n=ie.uid,o=ie.urlParams,i=ie.networkInfo,s=ie.systemInfo,c=ie.env,u=void 0===c?"prod":c,l=e.spm,f=void 0===l?{}:l,d="aSF"+t.id,p=[d],f.p&&(p.push("p"+f.p),f.m&&(p.push("m"+f.m),f.b&&p.push("b"+f.b))),h=a().page,m={app_id:"SF"+t.id,app_ver:t.version,guideVersion:"",tenant_code:"",uid:n,spm_value:p.join("."),action:e.action,spm_time:Date.now(),resource_spm:"",mobile:"",browser:"",browser_core:"",channel:o.channel||"self",channel2:"",portraitCode:"",other:e.other?JSON.stringify(e.other):"",device_brand:(null==s?void 0:s.brand)||"",device_model:(null==s?void 0:s.model)||"",network:i?i.networkInfo:"",os:(null==s?void 0:s.platform)||"",os_version:(null==s?void 0:s.system)||"",uri:h||"",user_agent:null===(v=window.navigator)||void 0===v?void 0:v.userAgent,events:e.events?JSON.stringify(e.events):""},process.env.REACT_APP_CONSOLE&&(m.spm_remark=e.spm_remark||""),console.log(m),console.log(u),[4,(b=m,j={baseURL:"双V"===t.buss_line?ae[u]:ce[u]},console.log(b,j),y=ne.post("/spm/burydata",b,j),w=500,void 0===w&&(w=500),Promise.race([se(w),y]))];case 1:return[2,r.sent()];case 2:return g=r.sent(),console.error(g),[2,Promise.resolve(null)];case 3:return[2]}var y,w,b,j}))}))},le=function(){console.log("访问3秒上报"),ue({action:4,spm:{},events:{activity_during_visit:{duration_time:3}}})},fe=Date.now(),de=!1;const pe=async e=>{console.log("通过authcode换取uid");try{let t={appId:"2017052707365622",authCode:e,sourceFrom:"YUEYOU_APP"};const n=await function(e){return ne.get("/auth/getAlipayOpenId",{baseURL:"https://luna-web.iyoudui.com",params:e})}(t);return console.log(n),n&&n.result?(console.log("获取uid成功: ",n.result),n.result):(console.error("获取uid失败",n),Promise.reject(null))}catch(e){return console.error("获取uid失败",e),Promise.reject(null)}},he=(e="")=>"string"==typeof e&&/^\d{16}$/.test(e);return new e(Object.freeze({__proto__:null,init:function(e){return n(this,void 0,void 0,(function(){var t,n,i,s,a,u;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),e=Object.assign({env:"prod",onConfig:function(e){o(e&&e.title)}},e),ie.env=e.env,t=c(),ie.urlParams=t,console.log(e),t.editor&&window.addEventListener("message",(function(t){if(console.log("onmessage",t.data),t.data){var n=t.data.type,r=t.data.payload;switch(n){case"back":history.back();break;case"config":o(r&&r.pageConfig&&r.pageConfig.title),e.onConfig(r.pageConfig),ie.config=r.pageConfig}}})),setTimeout((function(){return!de&&(!(!ie.config||!ie.uid)&&(de=!0,void le()))}),3e3),window.AlipayJSBridge&&(window.AlipayJSBridge.call("getNetworkType",(function(e){console.log("获取网络状态：",e),ie.networkInfo=e})),window.AlipayJSBridge.call("getSystemInfo",(function(e){console.log("获取设备信息：",e),ie.systemInfo=e}))),[4,Promise.all([oe(t.version)])];case 1:return n=r.sent(),i=n[0],s=n[1],console.log({config:i,uid:s}),o(i&&i.title),e.onConfig(i),ie.config=i,ie.uid=s,a={params:t,config:i,uid:s},Date.now()-fe>=3e3&&!de&&(de=!0,le()),[2,a];case 2:return u=r.sent(),console.log(u),[2,Promise.reject(u)];case 3:return[2]}}))}))},jump:function(e){if(/^(https?:\/\/|\/\/)/.test(e));else{var t=c();t.editor&&delete t.editor;var n=s(t);/\?/.test(e)?e+="&"+n:e+="?"+n}console.log("即将跳转：",e),location.href=e},setTitle:o,getParams:c,getConfig:oe,getConfigById:function(e,t){void 0===t&&(t="prod");var n="".concat("https://xiaojinhe-cdn.iyoudui.cn/haixing","/").concat(t,"/configs/").concat(e,"/config.json");return re(n)},getUid:async function(){const e=c();if(console.log("获取uid"),e.alipayOpenId&&he(e.alipayOpenId))return console.log("alipayOpenId:",e.alipayOpenId),e.alipayOpenId;const t=localStorage.getItem("uid");if(t&&he(t))return console.log("storage.uid:",t),t;try{if(window.AlipayJSBridge){console.log("通过支付宝sdk获取authcode");const e=await new Promise(((e,t)=>{try{window.AlipayJSBridge.call("getAuthCode",{scopeNicks:["auth_base"],appId:"2017052707365622",showErrorTip:!0},(function(n){const r=n.authcode||n.authCode;console.log("获取authCode: ",r),r?e(r):(console.error("获取authcode失败",n),t(null))}))}catch(e){console.error("获取uid失败",e),t(null)}})),t=await pe(e);return localStorage.setItem("uid",t),t}return console.log("非支付宝环境，无法获取uid"),Promise.reject(null)}catch(e){return console.log(e),console.log("获取uid失败"),Promise.reject(null)}}}))}));
//# sourceMappingURL=hx-sdk.js.map
